jQuery(document).ready(function(e){"use strict";if("undefined"!=typeof editProfile){var t=editProfile.ajaxURL,a=editProfile.uploadNonce,i=editProfile.fileTypeTitle;if(jQuery().validate&&jQuery().ajaxSubmit){var r=e("#ajax-loader"),n=e("#form-message"),o=e("#form-errors");r.fadeOut();var s={url:editProfile.ajaxURL,type:"post",dataType:"json",timeout:3e4,beforeSubmit:function(e,t,a){r.removeClass("vr_dn"),r.fadeIn(),n.empty().fadeOut(),o.empty().fadeOut()},success:function(e,t,a,i){if(r.fadeOut(),e.success)n.removeClass("vr_dn"),n.html(e.message).fadeIn();else{for(var s=0;s<e.errors.length;s++)o.append("<li>"+e.errors[s]+"</li>");o.removeClass("vr_dn"),o.fadeIn()}}};e("#inspiry-edit-user").validate({rules:{email:{required:!0,email:!0},pass2:{equalTo:"#pass1"}},submitHandler:function(t){e(t).ajaxSubmit(s)}})}var d=new plupload.Uploader({browse_button:"select-profile-image",file_data_name:"vr_upload_file_name",container:"plupload-container",multi_selection:!1,url:t+"?action=vr_profile_image_upload&nonce="+a,filters:{mime_types:[{title:i,extensions:"jpg,jpeg,gif,png"}],max_file_size:"2000kb",prevent_duplicates:!0}});d.init(),d.bind("FilesAdded",function(e,t){var a="";plupload.each(t,function(e){a+='<div id="holder-'+e.id+'" class="profile-thumb"></div>'}),document.getElementById("user-profile-img").innerHTML=a,e.refresh(),d.start()}),d.bind("UploadProgress",function(e,t){document.getElementById("holder-"+t.id).innerHTML="<span>"+t.percent+"%</span>"}),d.bind("Error",function(e,t){document.getElementById("errors-log").innerHTML+="<br/>Error #"+t.code+": "+t.message}),d.bind("FileUploaded",function(t,a,i){var r=e.parseJSON(i.response);if(r.success){var n='<img src="'+r.url+'" alt="" /><input type="hidden" class="profile-image-id" name="profile-image-id" value="'+r.attachment_id+'"/>';document.getElementById("holder-"+a.id).innerHTML=n}else console.log(r)}),e("#remove-profile-image").on("click",function(e){e.preventDefault(),document.getElementById("user-profile-img").innerHTML='<div class="profile-thumb"></div>'});var l=function(){for(var e,t=3,a=document.createElement("div"),i=a.getElementsByTagName("i");a.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->",i[0];);return t>4?t:e}();l<=9&&e("#inspiry-edit-user").before('<div class="ie9-message"><i class="fa fa-info-circle"></i>&nbsp; <strong>Current browser is not fully supported:</strong> Please update your browser or use a different one to enjoy all features on this page. </div>')}}),jQuery(document).ready(function(e){"use strict";function t(){e(".remove-detail").on("click",function(t){t.preventDefault();var a=e(this);a.closest(".inspiry-detail").remove()})}if("undefined"!=typeof propertySubmit){var a=propertySubmit.ajaxURL,i=propertySubmit.uploadNonce,r=propertySubmit.fileTypeTitle;e("#gallery-thumbs-container").sortable({revert:100,placeholder:"sortable-placeholder",cursor:"move"});var n=new plupload.Uploader({browse_button:"select-images",file_data_name:"inspiry_upload_file",container:"plupload-container",drop_element:"drag-and-drop",url:a+"?action=ajax_img_upload&nonce="+i,filters:{mime_types:[{title:r,extensions:"jpg,jpeg,gif,png"}],max_file_size:"10000kb",prevent_duplicates:!0}});n.init(),n.bind("FilesAdded",function(e,t){var a="";plupload.each(t,function(e){a+='<div id="holder-'+e.id+'" class="gallery-thumb"></div>'}),document.getElementById("gallery-thumbs-container").innerHTML+=a,e.refresh(),n.start()}),n.bind("UploadProgress",function(e,t){document.getElementById("holder-"+t.id).innerHTML="<span>"+t.percent+"%</span>"}),n.bind("Error",function(e,t){document.getElementById("errors-log").innerHTML+="<br/>Error #"+t.code+": "+t.message}),n.bind("FileUploaded",function(t,a,i){var r=e.parseJSON(i.response);if(r.success){var n='<img src="'+r.url+'" alt="" /><a class="remove-image" data-property-id="0"  data-attachment-id="'+r.attachment_id+'" href="#remove-image" ><i class="fa fa-trash-o"></i></a><a class="mark-featured" data-property-id="0"  data-attachment-id="'+r.attachment_id+'" href="#mark-featured" ><i class="fa fa-star-o"></i></a><input type="hidden" class="gallery-image-id" name="gallery_image_ids[]" value="'+r.attachment_id+'"/><span class="loader"><i class="fa fa-spinner fa-spin"></i></span>';document.getElementById("holder-"+a.id).innerHTML=n,o()}else console.log(r)});var o=function(){e("a.remove-image").unbind("click"),e("a.mark-featured").unbind("click"),e("a.mark-featured").on("click",function(t){t.preventDefault();var a=e(this),i=a.find("i");if(i.hasClass("fa-star-o")){e(".gallery-thumb .featured-img-id").remove(),e(".gallery-thumb .mark-featured i").removeClass("fa-star").addClass("fa-star-o");var a=e(this),r=a.siblings(".gallery-image-id"),n=r.clone().removeClass("gallery-image-id").addClass("featured-img-id").attr("name","featured_image_id");a.closest(".gallery-thumb").append(n),i.removeClass("fa-star-o").addClass("fa-star")}}),e("a.remove-image").on("click",function(t){t.preventDefault();var r=e(this),n=r.closest(".gallery-thumb"),o=r.siblings(".loader");o.show();var s=e.ajax({url:a,type:"POST",data:{property_id:r.data("property-id"),attachment_id:r.data("attachment-id"),action:"remove_gallery_image",nonce:i},dataType:"html"});s.done(function(t){var a=e.parseJSON(t);a.attachment_removed?n.remove():document.getElementById("errors-log").innerHTML+="<br/>Error : Failed to remove attachment"}),s.fail(function(e,t){alert("Request failed: "+t)})})};o()}var s={};(function(){var t=this;this.container=null,this.canvas=null,this.latlng=null,this.map=null,this.marker=null,this.geocoder=null,this.init=function(e){this.container=e,this.canvas=e.find(".map-canvas"),this.initLatLng(53.346881,-6.25886),this.initMap(),this.initMarker(),this.initGeocoder(),this.initMarkerPosition(),this.initListeners(),this.initAutoComplete(),this.bindHandlers()},this.initLatLng=function(e,t){this.latlng=new window.google.maps.LatLng(e,t)},this.initMap=function(){this.map=new window.google.maps.Map(this.canvas[0],{zoom:8,center:this.latlng,streetViewControl:0,mapTypeId:window.google.maps.MapTypeId.ROADMAP})},this.initMarker=function(){this.marker=new window.google.maps.Marker({position:this.latlng,map:this.map,draggable:!0})},this.initMarkerPosition=function(){var e,t,a=this.container.find(".map-coordinate").val(),i=this.container.find(".goto-address-button").val();a?(e=a.split(","),this.marker.setPosition(new window.google.maps.LatLng(e[0],e[1])),t=e.length>2?parseInt(e[2],10):15,this.map.setCenter(this.marker.position),this.map.setZoom(t)):i&&this.geocodeAddress(i)},this.initGeocoder=function(){this.geocoder=new window.google.maps.Geocoder},this.initListeners=function(){var e=t;window.google.maps.event.addListener(this.map,"click",function(t){e.marker.setPosition(t.latLng),e.updatePositionInput(t.latLng)}),window.google.maps.event.addListener(this.marker,"drag",function(t){e.updatePositionInput(t.latLng)})},this.updatePositionInput=function(e){this.container.find(".map-coordinate").val(e.lat()+","+e.lng())},this.geocodeAddress=function(e){var a,i="",r=e.split(",");for(a=0;a<r.length;a++)i+=jQuery("#"+r[a]).val(),a+1<r.length&&(i+=", ");i=i.replace(/\n/g,","),i=i.replace(/,,/g,",");var n=t;this.geocoder.geocode({address:i},function(e,t){t==window.google.maps.GeocoderStatus.OK&&(n.updatePositionInput(e[0].geometry.location),n.marker.setPosition(e[0].geometry.location),n.map.setCenter(n.marker.position),n.map.setZoom(15))})},this.initAutoComplete=function(){var a=this.container.find(".goto-address-button").val();if(!a)return null;var i=t;e("#"+a).autocomplete({source:function(t,a){i.geocoder.geocode({address:t.term},function(t,i){a(e.map(t,function(e){return{label:e.formatted_address,value:e.formatted_address,latitude:e.geometry.location.lat(),longitude:e.geometry.location.lng()}}))})},select:function(e,t){i.container.find(".map-coordinate").val(t.item.latitude+","+t.item.longitude);var a=new window.google.maps.LatLng(t.item.latitude,t.item.longitude);i.map.setCenter(a),setTimeout(function(){i.marker.setValues({position:a,animation:window.google.maps.Animation.DROP})},1500)}})},this.bindHandlers=function(){var a=t;this.container.find(".goto-address-button").on("click",function(){a.onFindAddressClick(e(this))})},this.onFindAddressClick=function(e){var t=e;this.geocodeAddress(t.val())}}).apply(s),e(".map-wrapper").each(function(){s.init(e(this))}),jQuery().validate&&e("#submit-property-form").validate({rules:{bedrooms:{number:!0},bathrooms:{number:!0},garages:{number:!0},price:{number:!0},size:{number:!0}}}),e("#inspiry-additional-details-container").sortable({revert:100,placeholder:"detail-placeholder",handle:".sort-detail",cursor:"move"}),e(".add-detail").on("click",function(a){a.preventDefault();var i='<div class="inspiry-detail inputs clearfix"><div class="inspiry-detail-control"><span class="sort-detail fa fa-bars"></span></div><div class="inspiry-detail-title"><input type="text" name="detail-titles[]" /></div><div class="inspiry-detail-value"><input type="text" name="detail-values[]" /></div><div class="inspiry-detail-control"><a class="remove-detail" href="#"><span class="fa fa-times"></span></a></div></div>';e("#inspiry-additional-details-container").append(i),t()}),t();var d=function(){for(var e,t=3,a=document.createElement("div"),i=a.getElementsByTagName("i");a.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->",i[0];);return t>4?t:e}();d<=9&&e("#submit-property-form").before('<div class="ie9-message"><i class="fa fa-info-circle"></i>&nbsp; <strong>Current browser is not fully supported:</strong> Please update your browser or use a different one to enjoy all features on this page. </div>')}),function(e){"use strict";"undefined"!=typeof favoriteData&&e(".vr_add_to_favorites").on("click",function(t){t.preventDefault();var a=e(this),i=a.data("rentalid"),r=favoriteData.userID;favoriteData.rentalID;if(!a.hasClass("vr_hearted")){var n=e.ajax({url:favoriteData.ajaxURL,method:"POST",data:{user_id:r,rental_id:i,action:favoriteData.action},dataType:"json"});n.done(function(e){if(e.success)a.addClass("vr_hearted vr_hearted_single");else{e.message}}),n.fail(function(e,t){})}}),e(".vr_remove_from_favorites").on("click",function(t){t.preventDefault();var a=e(this),i=a.attr("href"),r=a.data("rentalid"),n=a.closest(".vr_list"),o=e.ajax({url:i,type:"POST",data:{rental_id:r,action:"remove_from_favorites_action"},dataType:"json",beforeSend:function(e){a.hide()}});o.done(function(e){e.success?n.remove():loader.hide()}),o.fail(function(e,t){})})}(jQuery),jQuery(function(e){var t=e("#login-button"),a=e("#login-loader"),i=e("#login-error"),r=e("#login-message");a.fadeOut();var n={beforeSubmit:function(){t.attr("disabled","disabled"),a.removeClass("vr_dn"),a.fadeIn("fast"),r.fadeOut("fast"),i.fadeOut("fast")},success:function(n,o,s,d){var l=e.parseJSON(n);a.fadeOut("fast"),t.removeAttr("disabled"),l.success?(r.removeClass("vr_dn"),r.html(l.message).fadeIn("fast"),document.location.href=l.redirect):(i.removeClass("vr_dn"),i.html(l.message).fadeIn("fast"))}};e("#login-form").validate({submitHandler:function(t){e(t).ajaxSubmit(n)}});var o=e("#register-button"),s=e("#register-loader"),d=e("#register-error"),l=e("#register-message");s.fadeOut("fast");var u={beforeSubmit:function(){o.attr("disabled","disabled"),s.removeClass("vr_dn"),s.fadeIn("fast"),l.fadeOut("fast"),d.fadeOut("fast")},success:function(t,a,i,r){var n=e.parseJSON(t);s.fadeOut("fast"),o.removeAttr("disabled"),n.success?(l.removeClass("vr_dn"),l.html(n.message).fadeIn("fast"),document.location.href=n.redirect):(d.removeClass("vr_dn"),d.html(n.message).fadeIn("fast"))}};e("#register-form").validate({rules:{register_username:{required:!0},register_email:{required:!0,email:!0},register_pwd:{required:!0},register_pwd2:{equalTo:"#register_pwd"}},submitHandler:function(t){e(t).ajaxSubmit(u)}});var f=e("#forgot-button"),m=e("#forgot-loader"),c=e("#forgot-error"),p=e("#forgot-message");m.fadeOut("fast"),p.fadeOut("fast"),c.fadeOut("fast");var g={beforeSubmit:function(){f.attr("disabled","disabled"),m.removeClass("vr_dn"),m.fadeIn("fast"),p.fadeOut("fast"),c.fadeOut("fast")},success:function(t,a,i,r){var n=e.parseJSON(t);m.fadeOut("fast"),f.removeAttr("disabled"),n.success?(p.removeClass("vr_dn"),p.html(n.message).fadeIn("fast"),r.resetForm()):(c.removeClass("vr_dn"),c.html(n.message).fadeIn("fast"))}};e("#forgot-form").validate({submitHandler:function(t){e(t).ajaxSubmit(g)}})}),function(e){jQuery(document).ready(function(e){"use strict";if(e(function(){e("#vr_booking_date_checkin").datepicker({defaultDate:"+1w",dateFormat:"yy-mm-dd",numberOfMonths:1,autoSize:!0,onClose:function(t){e("#vr_booking_date_checkout").datepicker("option","minDate",t)}}),e("#vr_booking_date_checkout").datepicker({defaultDate:"+1w",dateFormat:"yy-mm-dd",numberOfMonths:1,autoSize:!0,onClose:function(t){e("#vr_booking_date_checkin").datepicker("option","maxDate",t)}})}),"undefined"!=typeof submitBooking){submitBooking.ajaxURL,submitBooking.uploadNonce,submitBooking.fileTypeTitle;if(jQuery().validate&&jQuery().ajaxSubmit){var t=e("#ajax-loader"),a=e("#form-message"),i=(e("#form-bookingid"),e("#form-errors"));t.fadeOut();var r={url:submitBooking.ajaxURL,type:"post",dataType:"json",timeout:3e4,beforeSubmit:function(e,r,n){t.removeClass("vr_dn"),t.fadeIn(),a.empty().fadeOut(),i.empty().fadeOut()},success:function(e,r,n,o){if(t.fadeOut(),e.success)document.getElementById("vr-submit-booking").reset(),a.removeClass("vr_dn"),a.html(e.message).fadeIn();else{for(var s=0;s<e.errors.length;s++)i.append("<li>"+e.errors[s]+"</li>");i.removeClass("vr_dn"),i.fadeIn()}}};e("#vr-submit-booking").validate({rules:{booking_title:{required:!1}},submitHandler:function(t){e(t).ajaxSubmit(r)}})}}else console.log("typeof submitBooking is undefined")})}(jQuery),jQuery(document).ready(function(e){"use strict";if("undefined"!=typeof submitPost){submitPost.ajaxURL,submitPost.uploadNonce,submitPost.fileTypeTitle;if(jQuery().validate&&jQuery().ajaxSubmit){var t=e("#ajax-loader"),a=e("#form-message"),i=e("#form-postid"),r=e("#form-errors");t.fadeOut();var n={url:submitPost.ajaxURL,type:"post",dataType:"json",timeout:3e4,beforeSubmit:function(e,i,n){t.fadeIn(),a.empty().fadeOut(),r.empty().fadeOut()},success:function(e,n,o,s){if(t.fadeOut(),e.success)a.html(e.message).fadeIn(),i.html(e.the_submit_post_id).fadeIn();else{for(var d=0;d<e.errors.length;d++)r.append("<li>"+e.errors[d]+"</li>");r.fadeIn()}}};e("#vr-submit-post").validate({rules:{post_title:{required:!0}},submitHandler:function(t){e(t).ajaxSubmit(n)}})}var o=function(){for(var e,t=3,a=document.createElement("div"),i=a.getElementsByTagName("i");a.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->",i[0];);return t>4?t:e}();o<=9&&e("#inspiry-edit-user").before('<div class="ie9-message"><i class="fa fa-info-circle"></i>&nbsp; <strong>Current browser is not fully supported:</strong> Please update your browser or use a different one to enjoy all features on this page. </div>')}});